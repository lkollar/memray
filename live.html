<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Example Applications for Memray" href="examples/README.html" /><link rel="prev" title="Native mode" href="native.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.03.04"/>
        <title>Live tracking - memray</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=935aa2abcc5c1da4283d1dc201fb1f0add16d23a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">memray</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/memray.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">memray</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="native.html">Native mode</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Live tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/README.html">Example Applications for Memray</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reporters</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="summary.html">Summary Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="flamegraph.html">Flame graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="table.html">Table Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="tree.html">Tree Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Stats Reporter</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Command Line Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli/summary.html">memray summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/run.html">memray run</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/live.html">memray live</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/flamegraph.html">memray flamegraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/table.html">memray table</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/tree.html">memray tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/stats.html">memray stats</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="live-tracking">
<span id="id1"></span><h1>Live tracking<a class="headerlink" href="#live-tracking" title="Permalink to this headline">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">memray</span></code> supports presenting a “live” view for tracking the heap memory usage of a running Python program.
This provides a holistic view of how much memory is being allocated, as the program is being executed.</p>
<p>It is designed to help investigate how a program is allocating memory as it executes, what the peak heap usage has been,
and analyze how much memory is being allocated by various parts of the program. The information is presented in a
tabular format, showing how much memory each function/method has allocated (“owned”), how much memory has been
cumulatively allocated by this and all subfunctions (“total”) and the number of calls to allocators like <cite>malloc</cite> have
been made by the program.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">#</a></h2>
<p>You can specify the program to be profiled in live mode using <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">--live</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>memray3.9 run --live dmpexample.py
<span class="go">Run 'memray3.9 live &lt;port&gt;' in another shell to see live results</span>
</pre></div>
</div>
<p>As you can see, <code class="docutils literal notranslate"><span class="pre">memray</span></code> is now waiting on a connection to the live tracking server. You can now attach to
the server using running the <code class="docutils literal notranslate"><span class="pre">live</span></code> command in a separate shell.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="c1"># in a different shell</span>
<span class="gp">$ </span>memray3.9 live &lt;port&gt;
</pre></div>
</div>
<p>This command will connect to the server that was started in the previous command, when given the requested port number.
Once the connection is established, the program will start executing. All memory allocations and deallocations
throughout the program will be tracked.</p>
<p>The program being tracked will present its output on the shell running the <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">--live</span></code> command. In the shell running
the <code class="docutils literal notranslate"><span class="pre">live</span></code> command, information about the program will be presented with a summary and allocation information in a
tabular format.</p>
<img alt="_images/live_running.png" src="_images/live_running.png"/>
<p>This view presents the following information:</p>
<ul class="simple">
<li><p>What the PID is of the running process.</p></li>
<li><p>What command was used to invoke the program.</p></li>
<li><p>The current heap size and the peak heap size seen so far.</p></li>
<li><p>How long the program has been running.</p></li>
<li><p>How many snapshots of the memory (referred to as samples) have been presented.</p></li>
<li><p>A plot of the heap size over time.</p></li>
</ul>
<p>Once the program has exited, there will be a message presented in the live view, stating that “Remote has disconnected”.</p>
<img alt="_images/live_disconnected.png" src="_images/live_disconnected.png"/>
</section>
<section id="sorting-results">
<h2>Sorting results<a class="headerlink" href="#sorting-results" title="Permalink to this headline">#</a></h2>
<p>The results are displayed in descending order of total memory allocated by a function and the subfunctions called by
it. You can change the ordering with the following keyboard shortcuts:</p>
<ul class="simple">
<li><p>t (default): Sort by total memory</p></li>
<li><p>o: Sort by own memory</p></li>
<li><p>a: Sort by allocation count</p></li>
</ul>
<p>The sorted column is highlighted with <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">&gt;</span></code> characters around the title.</p>
</section>
<section id="viewing-different-threads">
<h2>Viewing different threads<a class="headerlink" href="#viewing-different-threads" title="Permalink to this headline">#</a></h2>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">live</span></code> command will present the main thread of the program. You can look at different threads of the
program by pressing the left and right arrow keys.</p>
<img alt="_images/live_different_thread.png" src="_images/live_different_thread.png"/>
</section>
<section id="using-a-different-port">
<h2>Using a different port<a class="headerlink" href="#using-a-different-port" title="Permalink to this headline">#</a></h2>
<p>It is possible to make <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">--live</span></code> start the server on a user-specified port, using the <code class="docutils literal notranslate"><span class="pre">--live-port</span></code> argument.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3.9 -m memray run --live --live-port <span class="m">12345</span> dmpexample.py
<span class="go">Run 'memray3.9 live 12345' in another shell to see live results</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Due to the syntax of the command line arugments of memray, make sure that you pass any options intended for the
<code class="docutils literal notranslate"><span class="pre">run</span></code> command <em>before</em> your script/module. Otherwise, they will be treated as arguments for the script and will not
be used by <code class="docutils literal notranslate"><span class="pre">memray</span></code>.</p>
<p>For example, the following invocation will try running <code class="docutils literal notranslate"><span class="pre">python3.9</span> <span class="pre">dmpexample.py</span> <span class="pre">--live-port</span> <span class="pre">12345</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3.9 -m memray run --live dmpexample.py --live-port <span class="m">12345</span>
<span class="go">Run 'memray3.9 live 60125' in another shell to see live results</span>
</pre></div>
</div>
</div>
</section>
<section id="using-with-native-mode">
<h2>Using with <a class="reference internal" href="native.html"><span class="doc">native mode</span></a><a class="headerlink" href="#using-with-native-mode" title="Permalink to this headline">#</a></h2>
<p>It is possible to use <a class="reference internal" href="native.html"><span class="doc">native mode</span></a> along with the live mode. This can be achieved by passing <code class="docutils literal notranslate"><span class="pre">--native</span></code>
to the <code class="docutils literal notranslate"><span class="pre">run</span></code> command.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3.9 -m memray run --live --native dmpexample.py
<span class="go">Run 'memray3.9 live 60125' in another shell to see live results</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="examples/README.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Example Applications for Memray</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="native.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Native mode</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Live tracking</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#sorting-results">Sorting results</a></li>
<li><a class="reference internal" href="#viewing-different-threads">Viewing different threads</a></li>
<li><a class="reference internal" href="#using-a-different-port">Using a different port</a></li>
<li><a class="reference internal" href="#using-with-native-mode">Using with <span class="xref std std-doc">native mode</span></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>